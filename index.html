<!DOCTYPE html>
<html>
<head>
    <title>Find Places</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        #results {
            margin-top: 20px;
        }
        .restaurant {
            margin-bottom: 10px;
        }
        .viewport {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Find Nearby Restaurants</h1>
    <form id="locationForm">
        <label for="location">Enter location:</label>
        <input type="text" id="location" name="location">
        <button type="submit">Find</button>
    </form>
    <div id="results"></div>
    <div id="viewport"></div>
    <script>
        document.getElementById('locationForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const location = document.getElementById('location').value;

            fetch('/find_places', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `location=${encodeURIComponent(location)}`
            })
            .then(response => response.json())
            .then(data => {
                const resultsDiv = document.getElementById('results');
                const viewportDiv = document.getElementById('viewport');
                resultsDiv.innerHTML = '';
                viewportDiv.innerHTML = '';

                if (data.error) {
                    resultsDiv.innerHTML = `<p>${data.error}</p>`;
                } else {
                    data.restaurants.forEach(restaurant => {
                        const restaurantDiv = document.createElement('div');
                        restaurantDiv.classList.add('restaurant');
                        restaurantDiv.innerHTML = `
                            <strong>${restaurant.name}</strong><br>
                            Address: ${restaurant.address}<br>
                            Rating: ${restaurant.rating}<br>
                            Open Now: ${restaurant.open_now}<br>
                            Total Ratings: ${restaurant.total_ratings}
                        `;
                        resultsDiv.appendChild(restaurantDiv);
                    });

                    const viewportDivContent = `
                        <strong>Viewport</strong><br>
                        Northeast: (${data.viewport.northeast.lat}, ${data.viewport.northeast.lng})<br>
                        Southwest: (${data.viewport.southwest.lat}, ${data.viewport.southwest.lng})
                    `;
                    viewportDiv.innerHTML = viewportDivContent;
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
    </script>
</body>
</html>
